<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valorant Wheel Spinner</title>
  <link rel="icon" href="assets/images/icon.png" type="image/png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main id="appMain">
  <!-- Canvas for the wheel spinner -->
  <div id="wheelContainer" class="loading">
    <div id="wheelLoading" class="wheel-loading" role="status" aria-live="polite">
      <div class="loading-spinner" aria-hidden="true"></div>
    </div>
    <canvas id="wheelCanvas" width="800" height="800"></canvas>
    <div id="wheelMarker" aria-hidden="true"></div>
  </div>

  <div id="winnerModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <span id="closeWinner" class="close" role="button" aria-label="Close">&times;</span>
      <div class="winner-header">
        <div class="winner-title">
          <h2 id="winnerModalName">Winner</h2>
          <p class="winner-accent">Agent Selected</p>
        </div>
      </div>
      <img id="winnerModalImage" alt="Winner Image" />
      <div class="winner-actions">
        <button id="closeWinnerBtn" type="button" class="modal-button">Close</button>
        <button id="shareWinnerBtn" class="share-clipboard-btn modal-button" type="button" title="Copy proof image" aria-label="Copy proof image" disabled>
          <span class="share-icon" aria-hidden="true">⧉</span>
        </button>
      </div>
      <p id="shareStatus" class="share-status" role="status" aria-live="polite"></p>
    </div>
  </div>

  <!-- Agent list -->
  <div id="agentList"></div>

  <!-- Sound settings -->
  <!-- Settings cog and modal (sound/customization moved into modal) -->
  <button id="settingsBtn" class="settings-btn loading-gated" title="Settings">⚙️</button>

  <div id="settingsModal" class="modal" aria-hidden="true">
    <div class="modal-content settings-modal">
      <span id="closeSettings" class="close" role="button" aria-label="Close">&times;</span>
      <h3>Spin & Audio Settings</h3>

      <div class="settings-layout">
        <section class="settings-section">
          <h4>Agent Win Audio</h4>
          <p class="settings-subtitle">Control how voice lines behave when an agent wins.</p>
          <label class="toggle-label">
            <input type="checkbox" id="randomizeWinSoundsToggle">
            Randomize available voice lines
          </label>
          <div class="setting-row slider-row">
            <div class="slider-label">
              <span>Agent win volume</span>
              <strong id="agentVolumeLabel">50%</strong>
            </div>
            <input id="agentWinVolumeRange" type="range" min="0" max="1" step="0.01" value="0.5" />
          </div>
        </section>

        <section class="settings-section">
          <h4>Tick Sound</h4>
          <p class="settings-subtitle">Subtle clicks that play while the wheel spins.</p>
          <label class="toggle-label">
            <input type="checkbox" id="tickEnabledToggle">
            Enable tick sound
          </label>
          <div class="setting-row slider-row">
            <div class="slider-label">
              <span>Tick volume</span>
              <strong id="tickVolumeLabel">50%</strong>
            </div>
            <input id="tickVolumeRange" type="range" min="0" max="1" step="0.01" value="0.5" />
          </div>
        </section>

        <section class="settings-section">
          <h4>Drumroll</h4>
          <p class="settings-subtitle">Add a dramatic drum build-up before the winner reveal.</p>
          <label class="toggle-label">
            <input type="checkbox" id="drumrollEnabledToggle">
            Enable drumroll effect
          </label>
          <div class="setting-row slider-row">
            <div class="slider-label">
              <span>Drumroll volume</span>
              <strong id="drumrollVolumeLabel">50%</strong>
            </div>
            <input id="drumrollVolumeRange" type="range" min="0" max="1" step="0.01" value="0.5" />
          </div>
        </section>

        <section class="settings-section wide" id="perAgentSection">
          <h4>Per-Agent Voice Lines</h4>
          <p class="settings-subtitle">Enable, disable, or preview individual voice lines.</p>
          <div id="perAgentSettings">
            <!-- Per-agent customization inputs filled dynamically -->
          </div>
        </section>
      </div>
    </div>
  </div>

  <div id="debugPanel" class="debug-panel" aria-hidden="true">
    <div class="debug-panel-inner">
      <div class="debug-panel-row">
        <span class="debug-panel-title">Winner preview (debug)</span>
        <button id="debugHideBtn" type="button" class="debug-panel-close" aria-label="Hide debug panel">&times;</button>
      </div>
      <label for="debugAgentSelect" class="debug-panel-label">Preview agent</label>
      <select id="debugAgentSelect" class="debug-panel-select"></select>
      <button id="debugShowWinnerBtn" type="button" class="debug-panel-action">Show winner modal</button>
      <p class="debug-panel-hint">Press ESC to hide</p>
    </div>
  </div>

  </main>
  <script src="data/agents.js"></script>
  <script src="data/agent-sound-manifest.js"></script>
  <script src="js/base.js"></script>
  <script src="js/audio.js"></script>
  <script src="js/winner.js"></script>
  <script src="js/wheel.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/debug.js"></script>
  <script src="js/data.js"></script>
</body>
</html>
