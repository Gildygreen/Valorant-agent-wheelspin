<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valorant Wheel Spinner</title>
  <link rel="icon" href="assets/images/icon.png" type="image/png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main id="appMain">
  <!-- Canvas for the wheel spinner -->
  <div id="wheelContainer" class="loading">
    <div id="wheelLoading" class="wheel-loading" role="status" aria-live="polite">
      <div class="loading-spinner" aria-hidden="true"></div>
    </div>
    <canvas id="wheelCanvas" width="800" height="800"></canvas>
    <div id="wheelMarker" aria-hidden="true"></div>
  </div>

  <div id="winnerModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <span id="closeWinner" class="close" role="button" aria-label="Close">&times;</span>
      <div class="winner-header">
        <div class="winner-title">
          <h2 id="winnerModalName">Winner</h2>
          <p class="winner-accent">Agent Selected</p>
        </div>
      </div>
      <img id="winnerModalImage" alt="Winner Image" />
      <div class="winner-actions">
        <button id="closeWinnerBtn" type="button" class="modal-button">Close</button>
        <button id="shareWinnerBtn" class="share-clipboard-btn modal-button" type="button" title="Copy proof image" aria-label="Copy proof image" disabled>
          <span class="share-icon" aria-hidden="true">⧉</span>
        </button>
      </div>
      <p id="shareStatus" class="share-status" role="status" aria-live="polite"></p>
    </div>
  </div>

  <!-- Agent list -->
  <div id="agentList"></div>

  <!-- Sound settings -->
  <!-- Settings cog and modal (sound/customization moved into modal) -->
  <button id="settingsBtn" class="settings-btn loading-gated" title="Settings">⚙️</button>

  <div id="settingsModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <span id="closeSettings" class="close" role="button" aria-label="Close">&times;</span>
      <h3>Sound & Customization</h3>

      <div>
        <label><input type="checkbox" id="randomizeWinSoundsToggle"> Randomize Per-Agent Win Sounds</label>
      </div>

      <div id="agentSoundSettings" class="stacked-setting">
        <h4>Agent win sound</h4>
        <div class="range-label-row">
          <label for="agentWinVolumeRange">Volume</label>
          <span id="agentVolumeLabel">90%</span>
        </div>
        <input id="agentWinVolumeRange" type="range" min="0" max="1" step="0.01" value="0.9" />
      </div>

      <hr />
      <div id="tickSoundSettings">
        <h4>Tick sound</h4>
        <label><input type="checkbox" id="tickEnabledToggle"> Enable tick sound</label>
        <div style="margin-top:8px;">
          <label for="tickVolumeRange">Tick volume</label>
          <input id="tickVolumeRange" type="range" min="0" max="1" step="0.01" value="0.9" />
        </div>
        <div style="margin-top:8px;">
          <label for="tickOffsetRange">Tick offset (ms)</label>
          <input id="tickOffsetRange" type="range" min="-200" max="200" step="10" value="0" />
          <span id="tickOffsetLabel">0 ms</span>
        </div>
      </div>
      <div id="drumrollSettings" style="margin-top:12px;">
        <h4>Drumroll</h4>
        <label><input type="checkbox" id="drumrollEnabledToggle"> Enable drumroll</label>
        <div style="margin-top:8px;">
          <label for="drumrollVolumeRange">Drumroll volume</label>
          <input id="drumrollVolumeRange" type="range" min="0" max="1" step="0.01" value="0.9" />
        </div>
      </div>

      <hr />
      <div id="perAgentSettings">
        <!-- Per-agent customization inputs filled dynamically -->
      </div>
    </div>
  </div>

  <div id="debugPanel" class="debug-panel" aria-hidden="true">
    <div class="debug-panel-inner">
      <div class="debug-panel-row">
        <span class="debug-panel-title">Winner preview (debug)</span>
        <button id="debugHideBtn" type="button" class="debug-panel-close" aria-label="Hide debug panel">&times;</button>
      </div>
      <label for="debugAgentSelect" class="debug-panel-label">Preview agent</label>
      <select id="debugAgentSelect" class="debug-panel-select"></select>
      <button id="debugShowWinnerBtn" type="button" class="debug-panel-action">Show winner modal</button>
      <p class="debug-panel-hint">Press ESC to hide</p>
    </div>
  </div>

  </main>
  <script src="data/agents.js"></script>
  <script src="data/agent-sound-manifest.js"></script>
  <script src="js/base.js"></script>
  <script src="js/audio.js"></script>
  <script src="js/winner.js"></script>
  <script src="js/wheel.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/debug.js"></script>
  <script src="js/data.js"></script>
</body>
</html>
